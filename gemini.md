# Gemini開発ガイド for PC Dashboard

こんにちは！AIアシスタントのGemini (Jules) です。
このプロジェクトの開発を円滑に進めるためのガイドを作成しました。
私に作業を依頼する際の参考にしてください。

## 1. このプロジェクトについて

このプロジェクトは、**PC製造部門向けの生産実績データを処理し、分析するためのデータパイプライン**です。

- **入力**: `KANSEI_JISSEKI.txt` (生産実績データ、Shift_JIS、タブ区切り)
- **処理**: Pythonスクリプトがデータを読み込み、バリデーション（データチェック）を行います。
- **出力**: 処理済みのデータを `data/sqlite/production.db` というSQLiteデータベースに保存します。
- **最終目標**: `README.md` によると、将来的にはStreamlitを使ったWebダッシュボードでデータを可視化することを目指しています。

## 2. 主要な技術

- **言語**: Python 3
- **データ処理**: Pandas
- **データ検証**: Pydantic
- **データベース**: SQLite

## 3. プロジェクトの動かし方

メインプログラムは `src/main.py` です。以下のコマンドで実行できます。

```bash
python src/main.py
```

**注意点:** 現在の実装では、実行するたびに既存のデータベース (`production.db`) が削除され、新しく作り直されます。

## 4. Geminiへの指示の出し方（例）

私に開発を依頼する際は、**「何を」「どのように」変更・追加してほしいか**を具体的に伝えていただけると、より的確に対応できます。以下に具体例を挙げます。

---

### 機能追加・変更の依頼

- **データモデルの変更**

  - 「`ProductionRecord` モデルの `order_quantity` を必須項目から任意項目に変更してください。」

- **データ処理ロジックの変更**
  - 「`src/core/data_processor.py` で、`item_text` が空のレコードはエラーとして処理するように変更してください。
」
  - 「現在、`main.py` は実行のたびにDBを削除します。これを、データを追記する方式に変更してください。」

- **新しい機能の追加**
  - 「処理結果のサマリー（総行数、成功件数、失敗件数）を `reports/` ディレクトリにCSVファイルとして保存する機能を追加してください。」
  - 「`README.md` に書かれているStreamlitを使ったダッシュボードの雛形を作成してください。」

### 調査・分析の依頼

- **データ内容の確認**
  - 「データベースの `production_records` テーブルから、`order_type` が 'RE' のレコードを全て取得して表示してく
ださい。」
  - 「`KANSEI_JISSEKI.txt` の中で、`計画完了日` が不正なフォーマットになっている行がないか調べてください。」

### テストコードの作成

- 「`src/core/data_processor.py` の `_load_and_clean_dataframe` メソッドに対するテストを `test
s/` ディレクトリに作成してください。」
- 「`Pydantic` のバリデーションが失敗するような、不正なデータパターンを含むテストケースを追加してください。」

---

上記を参考に、お気軽にご依頼ください。
一緒にこのプロジェクトを完成させましょう！
